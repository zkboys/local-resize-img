!function(){function e(e){function i(a){if(u==a.length)return void e.input.val("");var r=a[u++],f=new FileReader,p=1;f.readAsBinaryString(r),f.onload=function(){var u=this.result;if("image/jpeg"==r.type){try{var f=new t.JpegFile(u,r.name)}catch(h){return alert("图片数据不正确"),!1}f.tiff&&f.tiff.Orientation&&(p=f.tiff.Orientation.value)}var c=window.URL||window.webkitURL,g=c.createObjectURL(r),m=new Image;m.src=g,m.onload=function(){var t=d.getImageBase64(this,{maxW:o,maxH:s,quality:n,orien:p});if("undefined"!=typeof e.input.attr("data-maxCount")){var r=e.input.attr("data-maxCount");r=r?parseInt(r):null,r&&(r-=1,e.input.attr("data-maxCount",r))}var u={base64:t,clearBase64:t.substr(t.indexOf(",")+1),maxCount:r};l.call(e.input,u),i(a)}}}var a={quality:.75,maxWidth:960,maxHeight:960,success:function(){}};e=$.extend({},a,e);var r=e.files,n=e.quality,o=e.maxWidth,s=e.maxHeight,l=e.success,u=0;i(r)}var t={};this.JpegMeta=t,t.parseNum=function(e,t,i,a){var r,n,o=">"===e;for(void 0===i&&(i=0),void 0===a&&(a=t.length-i),r=o?i:i+a-1;o?i+a>r:r>=i;o?r++:r--)n<<=8,n+=t.charCodeAt(r);return n},t.parseSnum=function(e,t,i,a){var r,n,o,s=">"===e;for(void 0===i&&(i=0),void 0===a&&(a=t.length-i),r=s?i:i+a-1;s?i+a>r:r>=i;s?r++:r--)void 0===o&&(o=128===(128&t.charCodeAt(r))),n<<=8,n+=o?255&~t.charCodeAt(r):t.charCodeAt(r);return o&&(n+=1,n*=-1),n},t.Rational=function(e,t){return this.num=e,this.den=t||1,this},t.Rational.prototype.toString=function(){return 0===this.num?""+this.num:1===this.den?""+this.num:1===this.num?this.num+" / "+this.den:this.num/this.den},t.Rational.prototype.asFloat=function(){return this.num/this.den},t.MetaGroup=function(e,t){return this.fieldName=e,this.description=t,this.metaProps={},this},t.MetaGroup.prototype._addProperty=function(e,i,a){var r=new t.MetaProp(e,i,a);this[r.fieldName]=r,this.metaProps[r.fieldName]=r},t.MetaGroup.prototype.toString=function(){return"[MetaGroup "+this.description+"]"},t.MetaProp=function(e,t,i){return this.fieldName=e,this.description=t,this.value=i,this},t.MetaProp.prototype.toString=function(){return""+this.value},t.JpegFile=function(e,i){var a=this._SOS;this.metaGroups={},this._binary_data=e,this.filename=i;var r,n,o,s,l,u,d,f=0,p=0;if(this._binary_data.slice(0,2)!==this._SOI_MARKER)throw new Error("Doesn't look like a JPEG file. First two bytes are "+this._binary_data.charCodeAt(0)+","+this._binary_data.charCodeAt(1)+".");for(f+=2;f<this._binary_data.length&&(r=this._binary_data.charCodeAt(f++),n=this._binary_data.charCodeAt(f++),p=f,r==this._DELIM)&&n!==a;){for(l=t.parseNum(">",this._binary_data,f,2),f+=l;f<this._binary_data.length;)if(r=this._binary_data.charCodeAt(f++),r==this._DELIM&&(o=this._binary_data.charCodeAt(f++),0!=o)){f-=2;break}s=f-p,this._markers[n]?(u=this._markers[n][0],d=this._markers[n][1]):(u="UNKN",d=void 0),d&&this[d](n,p+2)}if(void 0===this.general)throw Error("Invalid JPEG file.");return this},this.JpegMeta.JpegFile.prototype.toString=function(){return"[JpegFile "+this.filename+" "+this.general.type+" "+this.general.pixelWidth+"x"+this.general.pixelHeight+" Depth: "+this.general.depth+"]"},this.JpegMeta.JpegFile.prototype._SOI_MARKER="ÿØ",this.JpegMeta.JpegFile.prototype._DELIM=255,this.JpegMeta.JpegFile.prototype._EOI=217,this.JpegMeta.JpegFile.prototype._SOS=218,this.JpegMeta.JpegFile.prototype._sofHandler=function(e,i){if(void 0!==this.general)throw Error("Unexpected multiple-frame image");this._addMetaGroup("general","General"),this.general._addProperty("depth","Depth",t.parseNum(">",this._binary_data,i,1)),this.general._addProperty("pixelHeight","Pixel Height",t.parseNum(">",this._binary_data,i+1,2)),this.general._addProperty("pixelWidth","Pixel Width",t.parseNum(">",this._binary_data,i+3,2)),this.general._addProperty("type","Type",this._markers[e][2])},this.JpegMeta.JpegFile.prototype._JFIF_IDENT="JFIF\x00",this.JpegMeta.JpegFile.prototype._JFXX_IDENT="JFXX\x00",this.JpegMeta.JpegFile.prototype._EXIF_IDENT="Exif\x00",this.JpegMeta.JpegFile.prototype._types={1:["BYTE",1],2:["ASCII",1],3:["SHORT",2],4:["LONG",4],5:["RATIONAL",8],6:["SBYTE",1],7:["UNDEFINED",1],8:["SSHORT",2],9:["SLONG",4],10:["SRATIONAL",8],11:["FLOAT",4],12:["DOUBLE",8]},this.JpegMeta.JpegFile.prototype._tifftags={256:["Image width","ImageWidth"],257:["Image height","ImageLength"],258:["Number of bits per component","BitsPerSample"],259:["Compression scheme","Compression",{1:"uncompressed",6:"JPEG compression"}],262:["Pixel composition","PhotmetricInerpretation",{2:"RGB",6:"YCbCr"}],274:["Orientation of image","Orientation",{1:"Normal",2:"Reverse?",3:"Upside-down",4:"Upside-down Reverse",5:"90 degree CW",6:"90 degree CW reverse",7:"90 degree CCW",8:"90 degree CCW reverse"}],277:["Number of components","SamplesPerPixel"],284:["Image data arrangement","PlanarConfiguration",{1:"chunky format",2:"planar format"}],530:["Subsampling ratio of Y to C","YCbCrSubSampling"],531:["Y and C positioning","YCbCrPositioning",{1:"centered",2:"co-sited"}],282:["X Resolution","XResolution"],283:["Y Resolution","YResolution"],296:["Resolution Unit","ResolutionUnit",{2:"inches",3:"centimeters"}],273:["Image data location","StripOffsets"],278:["Number of rows per strip","RowsPerStrip"],279:["Bytes per compressed strip","StripByteCounts"],513:["Offset to JPEG SOI","JPEGInterchangeFormat"],514:["Bytes of JPEG Data","JPEGInterchangeFormatLength"],301:["Transfer function","TransferFunction"],318:["White point chromaticity","WhitePoint"],319:["Chromaticities of primaries","PrimaryChromaticities"],529:["Color space transformation matrix coefficients","YCbCrCoefficients"],532:["Pair of black and white reference values","ReferenceBlackWhite"],306:["Date and time","DateTime"],270:["Image title","ImageDescription"],271:["Make","Make"],272:["Model","Model"],305:["Software","Software"],315:["Person who created the image","Artist"],316:["Host Computer","HostComputer"],33432:["Copyright holder","Copyright"],34665:["Exif tag","ExifIfdPointer"],34853:["GPS tag","GPSInfoIfdPointer"]},this.JpegMeta.JpegFile.prototype._exiftags={36864:["Exif Version","ExifVersion"],40960:["FlashPix Version","FlashpixVersion"],40961:["Color Space","ColorSpace"],37121:["Meaning of each component","ComponentsConfiguration"],37122:["Compressed Bits Per Pixel","CompressedBitsPerPixel"],40962:["Pixel X Dimension","PixelXDimension"],40963:["Pixel Y Dimension","PixelYDimension"],37500:["Manufacturer notes","MakerNote"],37510:["User comments","UserComment"],40964:["Related audio file","RelatedSoundFile"],36867:["Date Time Original","DateTimeOriginal"],36868:["Date Time Digitized","DateTimeDigitized"],37520:["DateTime subseconds","SubSecTime"],37521:["DateTimeOriginal subseconds","SubSecTimeOriginal"],37522:["DateTimeDigitized subseconds","SubSecTimeDigitized"],33434:["Exposure time","ExposureTime"],33437:["FNumber","FNumber"],34850:["Exposure program","ExposureProgram"],34852:["Spectral sensitivity","SpectralSensitivity"],34855:["ISO Speed Ratings","ISOSpeedRatings"],34856:["Optoelectric coefficient","OECF"],37377:["Shutter Speed","ShutterSpeedValue"],37378:["Aperture Value","ApertureValue"],37379:["Brightness","BrightnessValue"],37380:["Exposure Bias Value","ExposureBiasValue"],37381:["Max Aperture Value","MaxApertureValue"],37382:["Subject Distance","SubjectDistance"],37383:["Metering Mode","MeteringMode"],37384:["Light Source","LightSource"],37385:["Flash","Flash"],37386:["Focal Length","FocalLength"],37396:["Subject Area","SubjectArea"],41483:["Flash Energy","FlashEnergy"],41484:["Spatial Frequency Response","SpatialFrequencyResponse"],41486:["Focal Plane X Resolution","FocalPlaneXResolution"],41487:["Focal Plane Y Resolution","FocalPlaneYResolution"],41488:["Focal Plane Resolution Unit","FocalPlaneResolutionUnit"],41492:["Subject Location","SubjectLocation"],41493:["Exposure Index","ExposureIndex"],41495:["Sensing Method","SensingMethod"],41728:["File Source","FileSource"],41729:["Scene Type","SceneType"],41730:["CFA Pattern","CFAPattern"],41985:["Custom Rendered","CustomRendered"],41986:["Exposure Mode","Exposure Mode"],41987:["White Balance","WhiteBalance"],41988:["Digital Zoom Ratio","DigitalZoomRatio"],41990:["Scene Capture Type","SceneCaptureType"],41991:["Gain Control","GainControl"],41992:["Contrast","Contrast"],41993:["Saturation","Saturation"],41994:["Sharpness","Sharpness"],41995:["Device settings description","DeviceSettingDescription"],41996:["Subject distance range","SubjectDistanceRange"],42016:["Unique image ID","ImageUniqueID"],40965:["Interoperability tag","InteroperabilityIFDPointer"]},this.JpegMeta.JpegFile.prototype._gpstags={0:["GPS tag version","GPSVersionID"],1:["North or South Latitude","GPSLatitudeRef"],2:["Latitude","GPSLatitude"],3:["East or West Longitude","GPSLongitudeRef"],4:["Longitude","GPSLongitude"],5:["Altitude reference","GPSAltitudeRef"],6:["Altitude","GPSAltitude"],7:["GPS time (atomic clock)","GPSTimeStamp"],8:["GPS satellites usedd for measurement","GPSSatellites"],9:["GPS receiver status","GPSStatus"],10:["GPS mesaurement mode","GPSMeasureMode"],11:["Measurement precision","GPSDOP"],12:["Speed unit","GPSSpeedRef"],13:["Speed of GPS receiver","GPSSpeed"],14:["Reference for direction of movement","GPSTrackRef"],15:["Direction of movement","GPSTrack"],16:["Reference for direction of image","GPSImgDirectionRef"],17:["Direction of image","GPSImgDirection"],18:["Geodetic survey data used","GPSMapDatum"],19:["Reference for latitude of destination","GPSDestLatitudeRef"],20:["Latitude of destination","GPSDestLatitude"],21:["Reference for longitude of destination","GPSDestLongitudeRef"],22:["Longitude of destination","GPSDestLongitude"],23:["Reference for bearing of destination","GPSDestBearingRef"],24:["Bearing of destination","GPSDestBearing"],25:["Reference for distance to destination","GPSDestDistanceRef"],26:["Distance to destination","GPSDestDistance"],27:["Name of GPS processing method","GPSProcessingMethod"],28:["Name of GPS area","GPSAreaInformation"],29:["GPS Date","GPSDateStamp"],30:["GPS differential correction","GPSDifferential"]},this.JpegMeta.JpegFile.prototype._markers={192:["SOF0","_sofHandler","Baseline DCT"],193:["SOF1","_sofHandler","Extended sequential DCT"],194:["SOF2","_sofHandler","Progressive DCT"],195:["SOF3","_sofHandler","Lossless (sequential)"],197:["SOF5","_sofHandler","Differential sequential DCT"],198:["SOF6","_sofHandler","Differential progressive DCT"],199:["SOF7","_sofHandler","Differential lossless (sequential)"],200:["JPG",null,"Reserved for JPEG extensions"],201:["SOF9","_sofHandler","Extended sequential DCT"],202:["SOF10","_sofHandler","Progressive DCT"],203:["SOF11","_sofHandler","Lossless (sequential)"],205:["SOF13","_sofHandler","Differential sequential DCT"],206:["SOF14","_sofHandler","Differential progressive DCT"],207:["SOF15","_sofHandler","Differential lossless (sequential)"],196:["DHT",null,"Define Huffman table(s)"],204:["DAC",null,"Define arithmetic coding conditioning(s)"],208:["RST0",null,"Restart with modulo 8 count “0”"],209:["RST1",null,"Restart with modulo 8 count “1”"],210:["RST2",null,"Restart with modulo 8 count “2”"],211:["RST3",null,"Restart with modulo 8 count “3”"],212:["RST4",null,"Restart with modulo 8 count “4”"],213:["RST5",null,"Restart with modulo 8 count “5”"],214:["RST6",null,"Restart with modulo 8 count “6”"],215:["RST7",null,"Restart with modulo 8 count “7”"],216:["SOI",null,"Start of image"],217:["EOI",null,"End of image"],218:["SOS",null,"Start of scan"],219:["DQT",null,"Define quantization table(s)"],220:["DNL",null,"Define number of lines"],221:["DRI",null,"Define restart interval"],222:["DHP",null,"Define hierarchical progression"],223:["EXP",null,"Expand reference component(s)"],224:["APP0","_app0Handler","Reserved for application segments"],225:["APP1","_app1Handler"],226:["APP2",null],227:["APP3",null],228:["APP4",null],229:["APP5",null],230:["APP6",null],231:["APP7",null],232:["APP8",null],233:["APP9",null],234:["APP10",null],235:["APP11",null],236:["APP12",null],237:["APP13",null],238:["APP14",null],239:["APP15",null],240:["JPG0",null],241:["JPG1",null],242:["JPG2",null],243:["JPG3",null],244:["JPG4",null],245:["JPG5",null],246:["JPG6",null],247:["JPG7",null],248:["JPG8",null],249:["JPG9",null],250:["JPG10",null],251:["JPG11",null],252:["JPG12",null],253:["JPG13",null],254:["COM",null],1:["JPG13",null]},this.JpegMeta.JpegFile.prototype._addMetaGroup=function(e,i){var a=new t.MetaGroup(e,i);return this[a.fieldName]=a,this.metaGroups[a.fieldName]=a,a},this.JpegMeta.JpegFile.prototype._parseIfd=function(e,i,a,r,n,o,s){var l,u,d,p,h,c,g,m,S,P,v,_,y,D=t.parseNum(e,i,a+r,2);y=this._addMetaGroup(o,s);for(var l=0;D>l;l++)if(d=a+r+2+12*l,p=t.parseNum(e,i,d,2),c=t.parseNum(e,i,d+2,2),m=t.parseNum(e,i,d+4,4),S=t.parseNum(e,i,d+8,4),void 0!==this._types[c]){if(h=this._types[c][0],g=this._types[c][1],S=4>=g*m?d+8:a+S,"UNDEFINED"==h)f=i.slice(S,S+m);else if("ASCII"==h)P=i.slice(S,S+m),P=P.split("\x00")[0];else{for(P=new Array,u=0;m>u;u++,S+=g)("BYTE"==h||"SHORT"==h||"LONG"==h)&&P.push(t.parseNum(e,i,S,g)),("SBYTE"==h||"SSHORT"==h||"SLONG"==h)&&P.push(t.parseSnum(e,i,S,g)),"RATIONAL"==h&&(v=t.parseNum(e,i,S,4),_=t.parseNum(e,i,S+4,4),P.push(new t.Rational(v,_))),"SRATIONAL"==h&&(v=t.parseSnum(e,i,S,4),_=t.parseSnum(e,i,S+4,4),P.push(new t.Rational(v,_))),P.push();1===m&&(P=P[0])}void 0!==n[p]&&y._addProperty(n[p][1],n[p][0],P)}},this.JpegMeta.JpegFile.prototype._jfifHandler=function(e,i){if(void 0!==this.jfif)throw Error("Multiple JFIF segments found");this._addMetaGroup("jfif","JFIF"),this.jfif._addProperty("version_major","Version Major",this._binary_data.charCodeAt(i+5)),this.jfif._addProperty("version_minor","Version Minor",this._binary_data.charCodeAt(i+6)),this.jfif._addProperty("version","JFIF Version",this.jfif.version_major.value+"."+this.jfif.version_minor.value),this.jfif._addProperty("units","Density Unit",this._binary_data.charCodeAt(i+7)),this.jfif._addProperty("Xdensity","X density",t.parseNum(">",this._binary_data,i+8,2)),this.jfif._addProperty("Ydensity","Y Density",t.parseNum(">",this._binary_data,i+10,2)),this.jfif._addProperty("Xthumbnail","X Thumbnail",t.parseNum(">",this._binary_data,i+12,1)),this.jfif._addProperty("Ythumbnail","Y Thumbnail",t.parseNum(">",this._binary_data,i+13,1))},this.JpegMeta.JpegFile.prototype._app0Handler=function(e,t){var i=this._binary_data.slice(t,t+5);i==this._JFIF_IDENT?this._jfifHandler(e,t):i==this._JFXX_IDENT},this.JpegMeta.JpegFile.prototype._app1Handler=function(e,t){var i=this._binary_data.slice(t,t+5);i==this._EXIF_IDENT&&this._exifHandler(e,t+6)},t.JpegFile.prototype._exifHandler=function(e,i){if(void 0!==this.exif)throw new Error("Multiple JFIF segments found");var a,r,n,o=this._binary_data.slice(i,i+2);if("II"===o)a="<";else{if("MM"!==o)throw new Error("Malformed TIFF meta-data. Unknown endianess: "+o);a=">"}if(r=t.parseNum(a,this._binary_data,i+2,2),42!==r)throw new Error("Malformed TIFF meta-data. Bad magic: "+r);if(n=t.parseNum(a,this._binary_data,i+4,4),this._parseIfd(a,this._binary_data,i,n,this._tifftags,"tiff","TIFF"),this.tiff.ExifIfdPointer&&this._parseIfd(a,this._binary_data,i,this.tiff.ExifIfdPointer.value,this._exiftags,"exif","Exif"),this.tiff.GPSInfoIfdPointer){if(this._parseIfd(a,this._binary_data,i,this.tiff.GPSInfoIfdPointer.value,this._gpstags,"gps","GPS"),this.gps.GPSLatitude){var s;s=this.gps.GPSLatitude.value[0].asFloat()+1/60*this.gps.GPSLatitude.value[1].asFloat()+1/3600*this.gps.GPSLatitude.value[2].asFloat(),"S"===this.gps.GPSLatitudeRef.value&&(s=-s),this.gps._addProperty("latitude","Dec. Latitude",s)}if(this.gps.GPSLongitude){var l;l=this.gps.GPSLongitude.value[0].asFloat()+1/60*this.gps.GPSLongitude.value[1].asFloat()+1/3600*this.gps.GPSLongitude.value[2].asFloat(),"W"===this.gps.GPSLongitudeRef.value&&(l=-l),this.gps._addProperty("longitude","Dec. Longitude",l)}}};{var i={ios:!1,android:!1,version:!1},a=navigator.userAgent,r=a.match(/MicroMessenger\/([^\s]+)/),n=(a.match(/WebKit\/([\d.]+)/),a.match(/(Android)\s+([\d.]+)/)),o=a.match(/(iPad).*OS\s([\d_]+)/),s=a.match(/(iPod).*OS\s([\d_]+)/),l=!s&&!o&&a.match(/(iPhone\sOS)\s([\d_]+)/),u=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/);u&&a.match(/TouchPad/),a.match(/Kindle\/([\d.]+)/),a.match(/Silk\/([\d._]+)/),a.match(/(BlackBerry).*Version\/([\d.]+)/),a.match(/MQQBrowser\/([\d.]+)/),a.match(/CriOS\/([\d.]+)/),a.match(/Opera\/([\d.]+)/),a.match(/Safari\/([\d.]+)/)}r&&(i.wx=!0,i.wxVersion=r[1]),n&&(i.android=!0,i.version=n[2]),l&&(i.ios=i.iphone=!0,i.version=l[2].replace(/_/g,".")),o&&(i.ios=i.ipad=!0,i.version=o[2].replace(/_/g,".")),s&&(i.ios=i.ipod=!0,i.version=s[2].replace(/_/g,".")),window.htmlEncode=function(e){return e.replace(/&/g,"&amp").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},window.htmlDecode=function(e){return e.replace(/&amp;/g,"&").replace(/&quot;/g,'/"').replace(/&lt;/g,"<").replace(/&gt;/g,">")};var d={isIosSubSample:function(e){var t=e.naturalWidth,i=e.naturalHeight,a=!1;if(t*i>1048576){var r=document.createElement("canvas");ctx=r.getContext("2d"),r.width=r.height=1,ctx.drawImage(e,1-t,0),a=0===ctx.getImageData(0,0,1,1).data[3],r=ctx=null}return a},getIosImageRatio:function(e,t,i){var a,r=document.createElement("canvas"),n=r.getContext("2d"),o=0,s=i,l=i;for(r.width=1,r.height=i,n.drawImage(e,1-Math.ceil(Math.random()*t),0),a=n.getImageData(0,0,1,i).data;l>o;){var u=a[4*(l-1)+3];0===u?s=l:o=l,l=s+o>>1}return l/i},getImageBase64:function(e,t){var a,r,n={maxW:t.maxW||800,maxH:t.maxH||800,quality:t.quality||.8,orien:t.orien||1},o=n.maxW,s=n.maxW,l=n.quality,u=e.naturalWidth,f=e.naturalHeight;i.ios&&d.isIosSubSample(e)&&(u/=2,f/=2),u>o&&u/f>=o/s?(a=o,r=f*o/u):f>s&&f/u>=s/o?(a=u*s/f,r=s):(a=u,r=f);var h,c=document.createElement("canvas"),g=c.getContext("2d");if(this.doAutoRotate(c,a,r,n.orien),i.ios){var m,S,P,v,_,y,D,F,I=document.createElement("canvas"),w=I.getContext("2d"),G=1024,R=d.getIosImageRatio(e,u,f);for(I.width=I.height=G,S=0;f>S;){for(v=S+G>f?f-S:G,m=0;u>m;)P=m+G>u?u-m:G,w.clearRect(0,0,G,G),w.drawImage(e,-m,-S),_=Math.floor(m*a/u),D=Math.ceil(P*a/u),y=Math.floor(S*r/f/R),F=Math.ceil(v*r/f/R),g.drawImage(I,0,0,P,v,_,y,D,F),m+=G;S+=G}I=w=null}else g.drawImage(e,0,0,u,f,0,0,a,r);if(i.android){var b=g.getImageData(0,0,c.width,c.height),x=new p(100*l);h=x.encode(b),x=null}else h=c.toDataURL("image/jpeg",l);return c=g=null,h},doAutoRotate:function(e,t,i,a){var r=e.getContext("2d");switch(a>=5&&8>=a?(e.width=i,e.height=t):(e.width=t,e.height=i),a){case 2:r.translate(t,0),r.scale(-1,1);break;case 3:r.translate(t,i),r.rotate(Math.PI);break;case 4:r.translate(0,i),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-i);break;case 7:r.rotate(.5*Math.PI),r.translate(t,-i),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-t,0)}},getFileObjectURL:function(e){var t=window.URL||window.webkitURL||!1;return t?t.createObjectURL(e):void 0},support:function(){return typeof window.File&&typeof window.FileList&&typeof window.FileReader&&typeof window.Blob}},p=function(e){function t(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],i=0;64>i;i++){var a=I((t[i]*e+50)/100);1>a?a=1:a>255&&(a=255),w[B[i]]=a}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],n=0;64>n;n++){var o=I((r[n]*e+50)/100);1>o?o=1:o>255&&(o=255),G[B[n]]=o}for(var s=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],l=0,u=0;8>u;u++)for(var d=0;8>d;d++)R[l]=1/(w[B[l]]*s[u]*s[d]*8),b[l]=1/(G[B[l]]*s[u]*s[d]*8),l++}function i(e,t){for(var i=0,a=0,r=new Array,n=1;16>=n;n++){for(var o=1;o<=e[n];o++)r[t[a]]=[],r[t[a]][0]=i,r[t[a]][1]=n,a++,i++;i*=2}return r}function a(){v=i(k,U),_=i(Y,X),y=i(W,q),D=i(V,z)}function r(){for(var e=1,t=2,i=1;15>=i;i++){for(var a=e;t>a;a++)C[32767+a]=i,x[32767+a]=[],x[32767+a][1]=i,x[32767+a][0]=a;for(var r=-(t-1);-e>=r;r++)C[32767+r]=i,x[32767+r]=[],x[32767+r][1]=i,x[32767+r][0]=t-1+r;e<<=1,t<<=1}}function n(){for(var e=0;256>e;e++)j[e]=19595*e,j[e+256>>0]=38470*e,j[e+512>>0]=7471*e+32768,j[e+768>>0]=-11059*e,j[e+1024>>0]=-21709*e,j[e+1280>>0]=32768*e+8421375,j[e+1536>>0]=-27439*e,j[e+1792>>0]=-5329*e}function o(e){for(var t=e[0],i=e[1]-1;i>=0;)t&1<<i&&(E|=1<<T),i--,T--,0>T&&(255==E?(s(255),s(0)):s(E),T=7,E=0)}function s(e){J.push(H[e])}function l(e){s(e>>8&255),s(255&e)}function u(e,t){var i,a,r,n,o,s,l,u,d,f=0;const p=8,h=64;for(d=0;p>d;++d){i=e[f],a=e[f+1],r=e[f+2],n=e[f+3],o=e[f+4],s=e[f+5],l=e[f+6],u=e[f+7];var c=i+u,g=i-u,m=a+l,S=a-l,P=r+s,v=r-s,_=n+o,y=n-o,D=c+_,F=c-_,I=m+P,w=m-P;e[f]=D+I,e[f+4]=D-I;var G=.707106781*(w+F);e[f+2]=F+G,e[f+6]=F-G,D=y+v,I=v+S,w=S+g;var R=.382683433*(D-w),b=.5411961*D+R,x=1.306562965*w+R,C=.707106781*I,A=g+C,J=g-C;e[f+5]=J+b,e[f+3]=J-b,e[f+1]=A+x,e[f+7]=A-x,f+=8}for(f=0,d=0;p>d;++d){i=e[f],a=e[f+8],r=e[f+16],n=e[f+24],o=e[f+32],s=e[f+40],l=e[f+48],u=e[f+56];var E=i+u,T=i-u,O=a+l,L=a-l,N=r+s,H=r-s,j=n+o,B=n-o,k=E+j,U=E-j,W=O+N,q=O-N;e[f]=k+W,e[f+32]=k-W;var Y=.707106781*(q+U);e[f+16]=U+Y,e[f+48]=U-Y,k=B+H,W=H+L,q=L+T;var X=.382683433*(k-q),V=.5411961*k+X,z=1.306562965*q+X,K=.707106781*W,Q=T+K,Z=T-K;e[f+40]=Z+V,e[f+24]=Z-V,e[f+8]=Q+z,e[f+56]=Q-z,f++}var $;for(d=0;h>d;++d)$=e[d]*t[d],M[d]=$>0?$+.5|0:$-.5|0;return M}function d(){l(65504),l(16),s(74),s(70),s(73),s(70),s(0),s(1),s(1),s(0),l(1),l(1),s(0),s(0)}function f(e,t){l(65472),l(17),s(8),l(t),l(e),s(3),s(1),s(17),s(0),s(2),s(17),s(1),s(3),s(17),s(1)}function p(){l(65499),l(132),s(0);for(var e=0;64>e;e++)s(w[e]);s(1);for(var t=0;64>t;t++)s(G[t])}function h(){l(65476),l(418),s(0);for(var e=0;16>e;e++)s(k[e+1]);for(var t=0;11>=t;t++)s(U[t]);s(16);for(var i=0;16>i;i++)s(W[i+1]);for(var a=0;161>=a;a++)s(q[a]);s(1);for(var r=0;16>r;r++)s(Y[r+1]);for(var n=0;11>=n;n++)s(X[n]);s(17);for(var o=0;16>o;o++)s(V[o+1]);for(var u=0;161>=u;u++)s(z[u])}function c(){l(65498),l(12),s(3),s(1),s(0),s(2),s(17),s(3),s(17),s(0),s(63),s(0)}function g(e,t,i,a,r){var n,s=r[0],l=r[240];const d=16,f=63,p=64;for(var h=u(e,t),c=0;p>c;++c)A[B[c]]=h[c];var g=A[0]-i;i=A[0],0==g?o(a[0]):(n=32767+g,o(a[C[n]]),o(x[n]));for(var m=63;m>0&&0==A[m];m--);if(0==m)return o(s),i;for(var S,P=1;m>=P;){for(var v=P;0==A[P]&&m>=P;++P);var _=P-v;if(_>=d){S=_>>4;for(var y=1;S>=y;++y)o(l);_=15&_}n=32767+A[P],o(r[(_<<4)+C[n]]),o(x[n]),P++}return m!=f&&o(s),i}function m(){for(var e=String.fromCharCode,t=0;256>t;t++)H[t]=e(t)}function S(e){if(0>=e&&(e=1),e>100&&(e=100),F!=e){var i=0;i=Math.floor(50>e?5e3/e:200-2*e),t(i),F=e}}function P(){var t=(new Date).getTime();e||(e=50),m(),a(),r(),n(),S(e);(new Date).getTime()-t}var v,_,y,D,F,I=(Math.round,Math.floor),w=new Array(64),G=new Array(64),R=new Array(64),b=new Array(64),x=new Array(65535),C=new Array(65535),M=new Array(64),A=new Array(64),J=[],E=0,T=7,O=new Array(64),L=new Array(64),N=new Array(64),H=new Array(256),j=new Array(2048),B=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Y=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t){var i=(new Date).getTime();t&&S(t),J=new Array,E=0,T=7,l(65496),d(),p(),f(e.width,e.height),h(),c();var a=0,r=0,n=0;E=0,T=7,this.encode.displayName="_encode_";for(var s,u,m,P,F,I,w,G,x,C=e.data,M=e.width,A=e.height,H=4*M,B=0;A>B;){for(s=0;H>s;){for(F=H*B+s,I=F,w=-1,G=0,x=0;64>x;x++)G=x>>3,w=4*(7&x),I=F+G*H+w,B+G>=A&&(I-=H*(B+1+G-A)),s+w>=H&&(I-=s+w-H+4),u=C[I++],m=C[I++],P=C[I++],O[x]=(j[u]+j[m+256>>0]+j[P+512>>0]>>16)-128,L[x]=(j[u+768>>0]+j[m+1024>>0]+j[P+1280>>0]>>16)-128,N[x]=(j[u+1280>>0]+j[m+1536>>0]+j[P+1792>>0]>>16)-128;a=g(O,R,a,v,y),r=g(L,b,r,_,D),n=g(N,b,n,_,D),s+=32}B+=8}if(T>=0){var k=[];k[1]=T+1,k[0]=(1<<T+1)-1,o(k)}l(65497);var U="data:image/jpeg;base64,"+btoa(J.join(""));J=[];(new Date).getTime()-i;return U},P()};!function(t){t.fn.localResizeImg=function(i){var a=t(this),r=i.before;return a.on("change",function(){if(!d.support())return alert("您的设备不支持图片上传"),!1;var t=this.files,n=9;if("undefined"!=typeof a.attr("data-maxCount")&&(n=a.attr("data-maxCount"),n=n?parseInt(n):n),r){var o=r.call(a,{files:t,maxCount:n});if(o===!1)return a}return 0>=n?a:(i.files=t,i.input=a,void e(i))}),a}}(jQuery,window,document)}();